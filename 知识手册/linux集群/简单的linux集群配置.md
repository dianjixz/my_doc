# 简单的linux集群配置
本文的主要目的是在尽量利用现有工具创建一个 linux 集群

利用 ssh 的反向代理的特性可以将处于内部网络中的 linux 设备的 ssh 端口代理到远程服务器主机中。这样我们能在服务器中操作所有的 linux 设备。  
由于 ssh 隧道自带端口转发，文件转发等特性，可以很方便的将相应的程序或者文件部署到 linux 集群中，这是拥有非常强力的控制通道。


## 简单的 ssh 集群构建，ssh 方案构建
构建一个集群的最简单的方法是使用 c/s 模式，选择一台性能较强的 linux 主机搭建一台 ssh 服务器。
然后在子节点上的所有 linux 设备上配置一个影射通道，将自己的ssh端口影射到服务器上的 50000-60000 端口。
这就完成了一个简单集群资源集中。

具体步骤是：
1、在服务器上配置 sshd 服务，开启令牌登陆。
2、在 linux 设备上配置 ssh 连接，设定一个服务器的 ssh 免密连接，开机后运行一个脚本，该脚本会按照 50000-60000 的端口逐步尝试影射，直到影射成功为止。注意一定要开启心跳包，保持tcp链路的连接。

服务器可以通过端口扫描确定连接到主机上的从机设备，通过执行 ssh 命令来确定从机的身份。
这样就创建了一个简单的 linux 集群。



## 简单的 ssh 集群构建，frp 方案构建
frp 是一个高性能内网穿透软件,可以将远程服务器上的 tcp 端口代理到内网内主机中.
通过配置 frp,最好是能够动态的将自身的 ssh 端口影射到服务器上.
loophole,localtunnel,expose,bore,tabserve,staqlab,jprq,zrok,telebit,ssh-j.com,
其实也可以使用 Cargo 工具,它也是一个非常轻量的工具.




其实这个最简方案的本质只是一个 tcp 端口代理,将本机的端口代理到主服务器中去.