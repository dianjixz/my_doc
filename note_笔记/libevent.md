 

1 什么是libevent

首先大家思考一个问题，你的产品开发过程中，是否使用了多线程？是否加了很多线程锁？？如果没有多线程，功能能否实现得了？？？然后我们看看一般工程师得开发方式，比如你的程序需要和串口通信，需要和TCP服务器交互，需要和其它进程通信，所以只能开3个线程去处理这些东西；好一点得工程师还能想到用线程池加负载均衡的方式，但还是多线程！为什么会这样？因为多线程是处理异步事件的一种方法，而这种方法在嵌入式上的开发是不能容忍的。那有没有一种很好的处理异步事件的开源库而且只要一个线程(主进程本身)，有，其中一个就是libevent，这是一个基于3-Clause BSD的开源库！

这就是为什么前面章节我们讲解了link，因为link是基于epoll实现的异步监听，从而达到对各个描述符很好的监听作用，link是笔者自己完成编写的；而libevent是第三方开源库，更加稳定，但代码量大，有问题不好找（正常情况不会遇到），link代码量少，适合程序逻辑不是很复杂的应用。

引用百度百科的描述：Libevent 是一个用C语言编写的、轻量级的开源高性能事件通知库，主要有以下几个亮点：事件驱动（ event-driven），高性能;轻量级，专注于网络，不如 ACE 那么臃肿庞大；源代码相当精炼、易读；跨平台，支持 Windows、 Linux、 *BSD 和 Mac Os；支持多种 I/O 多路复用技术， epoll、 poll、 dev/poll、 select 和 kqueue 等；支持 I/O，定时器和信号等事件；注册事件优先级。Libevent 已经被广泛的应用，作为底层的网络库；比如 memcached、 Vomit、 Nylon、 Netchat等等。
2 交叉编译libevent

我们使用的libevent版本是:2.1.12-stable，源码如下：

获取源码有两个方式：官网和github

建议在官网下载： https://libevent.org/

a、配置

运行命令：

./configure --disable-openssl --host=aarch64-linux-gnu CC=aarch64-linux-gnu-gcc

没有提示error表示成功！

b、编译

运行命令：make

没有提示error表示编译成功：

c、安装

编译成功后，我们可以在目录 .lib 中看到链接库，注意，这是个隐藏目录：

最后确定下库的文件格式，通过file命令查看：

如果这里是x86说明一开始的configure没对，需要检查下。

重要，补充说明：我们编译库的时候，手动把openssl关闭了(--disable-openssl)；这里先卖个关子，libevent组件支持了http通信，http是基于tcp之上的通信，明文的，网络通信中有一个层叫TLS也就是传输层安全，openssl提供了相关的支持，http+tls = https也就是带了安全层的http通信，但是需要依赖到openssl库，如果不关闭，编译是无法通过的，我们后面章节会详细讲解。

 

============================================================================================================================================================

如果觉得对您有帮助并想进一步深入学习交流可以扫描以下微信二维码或加入QQ群：928840648

欢迎共同学习成长，有一群爱学习的小伙伴一起勉励！！一起加油！！也可点击

 

笔者基于嵌入式系统框架内容如下整理编辑：


————————————————
版权声明：本文为CSDN博主「HomeByte」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/homebyte/article/details/109553770
